
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A programming language with a simple no-keyword syntax for computing tensors and rational numbers with unlimited precision">
      
      
        <meta name="author" content="rsashka">
      
      
        <link rel="canonical" href="https://i-am-esma.github.io/newlang/en/syntax/">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.2">
    
    
      
        <title>Синтаксис NewLang (0.3) - NewLang Programming Language</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7bf56d0a.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"JetBrains Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="amber">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#newlang-03" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="NewLang Programming Language" class="md-header__button md-logo" aria-label="NewLang Programming Language" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NewLang Programming Language
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Синтаксис NewLang (0.3)
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="amber" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/i-am-esma/newlang" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    I-am-Esma/NewLang
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="NewLang Programming Language" class="md-nav__button md-logo" aria-label="NewLang Programming Language" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    NewLang Programming Language
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/i-am-esma/newlang" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    I-am-Esma/NewLang
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../index.md" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Documentation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Documentation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ru/syntax/" class="md-nav__link">
        Syntax
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../contribution.md" class="md-nav__link">
        Contribute
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    Основы
  </a>
  
    <nav class="md-nav" aria-label="Основы">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    Правила именования объектов и типов данных
  </a>
  
    <nav class="md-nav" aria-label="Правила именования объектов и типов данных">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    Префиксы (модификаторы)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    Локальные и глобальные переменные
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    Пространства имен
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    Программные модули
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    Макросы
  </a>
  
    <nav class="md-nav" aria-label="Макросы">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    Определение макросов
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    Специальные идентификаторы
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    Зарезервированные имена компилятора
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    Системные свойства
  </a>
  
    <nav class="md-nav" aria-label="Системные свойства">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    У всех переменных (объектов) есть системные свойства
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    Системные свойства у модулей
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="newlang-03">Синтаксис NewLang (0.3)</h1>
<h2 id="_1">Основы</h2>
<ul>
<li>Операторы разделяются точкой с запятой «;».</li>
<li>Отступы и переводы строк игнорируются.</li>
<li>Однострочные комментарии начинаются с символа «#» до перевода строки, что соответствует комментариям в стиле Python и Bash.</li>
<li>Многострочные комментарии соответствуют стилю С/С++ и должны располагаться между символами /<em> и </em>/. Многосточные комментарии могут быть вложенными.</li>
<li>Последовательность команд, которая должна выполняться как единое целое заключается в фигурные скобки «{}» и возвращает результат последней операции <em>(что очень похоже на оператор </em><em>запятая</em><em> в языках С/С++)</em>.</li>
</ul>
<h3 id="_2">Правила именования объектов и типов данных</h3>
<p>В качестве идентификаторов объектов и типов данных можно использовать буквы, цифры и знаки подчеркивания в любых комбинациях, при условии, что первый символ идентификатора не является цифрой. Подчерк в начале имени или двойные подчерки в начале и в конце имени имеют специальное значение.</p>
<p>Перед именем может быть указан специальный префикс (модификатор), который состоит из одного символа и имеет определнное значение:</p>
<h4 id="_3">Префиксы (модификаторы)</h4>
<ul>
<li><strong>$</strong> — в начале имени обозначает локальную переменную, время жизни которой ограничено текущей областью видимости и при её завершении локальная переменная уничтожается.</li>
<li><strong>:</strong> — двоеточие вначале идентификатора используется для указания имени <a href="https://newlang.net/types.html">типа</a></li>
<li><strong>::</strong> — двойные двоеточия являются разделителями для указания пространства имен</li>
<li><strong>@</strong> — Префикс <strong>@</strong> обозначает программный модуль</li>
<li><strong>\</strong> — обратная коса черта является модификатором у имени макроса</li>
</ul>
<p>Если перед именем объекта модификатор не указан, сперва он проверяется на имя макроса, потом на локальную переменную и в последнюю очередь на имя объекта модуля.</p>
<h3 id="_4">Локальные и глобальные переменные</h3>
<p>В <em>NewLang</em> по умолчанию переменная создается как глобальная статическая, которая сохраняет свое состояние между вызовами.</p>
<p>Чтобы создать локальную перемененную, перед её именем необходимо указать знак доллара <strong>$</strong>, тогда такая переменная будет уничтожаться при выходе из текущей области видимости. 
Если условно классифицировать эти два варианта переменных, то можно считать, что переменная по умолчанию создается в куче, а локальная с префиксом <strong>$</strong> на стеке.</p>
<p>Семантика локальных переменных, а так же аргументов у функций очень похожа на аргументы в bash скриптах, где <strong>$1</strong> или <strong>$arg</strong> — порядковый номер или имя аргумента.</p>
<h3 id="_5">Пространства имен</h3>
<p><em>NewLang</em> одновременно поддерживает и пространства имен, как в языке C++, так и модульную структуру кода как в языках Java и Python.
Синтаксис для указания пространства имен очень похож на С++. Имена разделяются двойным двоеточием, а для определение пространства имен, его нужно указать перед открывающейся фигурной скобкой.</p>
<pre><code>ns {
    name {
        var := 0; # Имя переменной будет ns::name::var
        ::var := 1; # Переменная из глобального пространства имен
    }
}
</code></pre>
<h3 id="_6">Программные модули</h3>
<p>В <em>NewLang</em> реализована концепция программных модулей - которая повторяет идею иерархического расположения файлов в структуре каталогов файловой системы, так же, как это сделано в языках Python и Java. Имя программного модуля начинается на префикс <strong>@</strong>, а структура каталогов указывается через точку. </p>
<p>Причем в именовании объектов концепции программных модулей и пространства имен объединены. Например, полное имя переменой можно записать с указанием программного модуля <code>@root.dir.module::ns::name::var</code>, где <strong>root</strong> и <strong>dir</strong> это каталоги в файловой системе, а <strong>module</strong> — имя файла, т.е. <em>root/dir/module.nlp</em></p>
<p>Области видимости объектов определяются аналогично прияным в языке Python с помощью подчерков перед именем переменной.</p>
<p>Один подчерк соответствует защищенной, а два подчерка - приватной области видимости объекта в соответствующем модуле или классе.
Но так же как и в языке Python области видимости больше соответствуют "джентльменской" договоренности и при явном указании имени, доступ к защищенным объектам можно получить указав их полное имя. Системные поля и объекты начинаются и заканчиваются на два подчерка.</p>
<h3 id="_7">Макросы</h3>
<p>Макросы в <em>NewLang</em>, это один или несколько терминов, которые заменяется на другой термин или на целую синтаксическую конструкцию (последовательность лексем). Макросы являются одновременно и раширением базового синтаксиса языка при реализации собственных диалектов DSL и синтаксическим сахаром. Главная особенность макросов в том, что они позволяют изменять выражения еще до их вычисления во время выполнения. А так как раскрытие макросов происходит на этапе синтаксического анализа, это позвоялет подменять ими любые другие термины и даже модифицировать сам синтаксис <em>NewLang</em>. </p>
<p>Пока текущая реализация макросов предназначена для проверки общей концепции их использования и в будущем может немного измениться. Поэтому, сейчас раскрытие и проверки макросов сделаны в объеме, который минимально достаточен для их начального использования. я препроцессора в C/C++.</p>
<h4 id="_8">Определение макросов</h4>
<p>Макрос создается по тем же самым правилам, что и обычная переменная. Идентификатором макроса может быть одиночное имя (термин с префиксом макроса) или  последовательность из нескольких лексем, которая записывается между двумя обратными слешами. 
В качестве тела (значения) у макроса может быть термин или корректное выражение языка, например: <code>\обычный_макрос := 123;</code>, <code>\\два термина\\ := {func(); func2(123);};</code> или последовательность лексем, которая записывается  между двумя обратными слешами <code>\макрос_из_лексем := \\ call1(); call2(); call3() \\;</code>.
Тело текстового макроса записывается между тремя обратными слешами: <code>\текстовый_макрос := \\\ исходный текст программы для лексера \\\;</code>.</p>
<blockquote>
<p>Первоначальноа у меня было желание ограничить время жизни макросов так же как у локальных переменных - только текущей областью видимости, чтобы при её завершении макрос удаляется автоматически. Но макросы обработываются раньше, чем происходит анализ входных лексем парсером (т.е. раньше, чем формируются сами области видимости). А перенести обработку макросов на более поздний этап, например, после создания синтаксичсекого дереава, так же не получается, так как пропадет возможность модифицировать AST во время парсинга исходного кода. Поэтому пришлось выбирать между локальными областями видимости у макросов и возможностьию модификации абстрактного синтаксического дерева, и в результате я выбрал последнее. Поэтому, макросы могут произвольным образом менять синтаксис языка, но всегда имеют глобальную область видимости где бы они не были объявлены.</p>
</blockquote>
<p>Для удаления макросов требуется использовать специальный синтаксис: <code>\\\\ name \\\\;</code> или <code>\\\\ \\два термина\\ \\\\;</code>, т.е. указать идентификатор макроса между четырмя обратными слешами. Необходимость использования отдельной синтасической конструкции для удаления макросов вызвана тем, что они обработываются и раскрываются еще до этапа анализа в парсере. Из-за этого операторы <a href="https://newlang.net/ops.html">создания и присвоения значения</a> в полном объеме работают только с макросами, идентификаторами которых выступают последовательность лексем, тогда как создание макроса с идентификатором из одиночного термина может быть только оператор создания или присвоения, т.е. <code>\macro := new_expression;</code>, а использование операторов <code>::=</code> и <code>=</code> не допускается.</p>
<p>Один из терминов в идентификаторе макроса может иметь аргументы, которые указываются в круглых скобках. Аргументы в теле макроса записываются как имя локальной переменой, но перед её именем (или порядковым номером аргумента) нужно добавить обратный слеш, т.е. <code>\$name</code> или <code>\$1</code>.</p>
<pre><code>    # Обычные макросы (тело макроса корректное выражение)
    \macro      := replace();
    \macro2(arg)   := { call(\$arg); call()};
    \\name1 name2\\  := replace();

    # Тело макросов из последовательности лексем
    \if(...)    := \\ [ \$* ]--&gt; \\; # Выражение может быть не полным
    \elif(...)  := \\ ,[ \$* ]--&gt; \\;
    \else       := \\ ,[ _ ]--&gt; \\;

    # Тело макроса из текстовой строки (как в препроцессоре С/С++)
    \macro_str  := \\\ строка - тело макроса \\\; # Строка для лексера

    # Оператор удаления макроса (любого другого объекта?????)
    \\\\macro_str\\\\;

    # Классическая запись условного оператора
    # с использованием определнных выше макросов
    if( condition ){
        ...
    } elif( condition2 ) {
        ...
    } else {
        ...
    };
</code></pre>
<p>В настоящий момент макросы реализоаны следующим образом.  </p>
<p>Идентификатор мароса, левое выражение от оператора присвоения, может быть одиночным термином или состоять из лексем (одного или нескольких терминов, которые заисны между двойными слешами), а тело марокса макроса так же может быть одиночным термином, состоять из лексем или быть обычной текстовой строкой, которая будет анализироваться парсером только после раскрытия тела макроса (как в препроцессоре С/С++).</p>
<pre><code>   # Тело макроса полное (корректное) выражение
    \macro      := replace(); 
    \macro2(arg)   := { call(\$arg); call()};
    \\lexem1 lexem2\\  := replace();

    # Тело макросов из последовательности лексем
    # и может быть не полным выражением
    \if(...)    := \\ [ \$* ]--&gt; \\; 
    \elif(...)  := \\ ,[ \$* ]--&gt; \\;
    \else       := \\ ,[ _ ]--&gt; \\;

    # Тело макроса из текстовой строки (как в препроцессоре С/С++)
    \macro_str  := \\\ строка - тело макроса \\\; # Строка для лексера
</code></pre>
<ul>
<li>Обычный макрос  - заменяет один или сразу несколько терминов на тело макроса. Тело обычного макроса может быть корректным выражением языка или последовательности лексем, которые будут анализироваться парсером только после раскрытия макроса. Таким образом можно модифицировать базовый синтаксис языка за счет применения сразу нескольких макросов при записи одного оператора (см. условный оператор или оператор выбора).</li>
<li>Текстовый макрос - так же заменяет один или несколько терминов, но его тело представляет собой обычный текстовый фрагмент исходного кода, который во время раскрытия макроса передается на вход лексера. Фактически, текстовые макросы это полный аналог макросов дл</li>
</ul>
<p>Макросы используются и для превращеня базового синтаксиса <em>NewLang</em>, в более привычный синтаксис на основе <a href="https://newlang.net/syntax_dsl.html">ключевых слов</a>, так как такой тест гораздо легче воспринимается при последующем чтении исходного кода.</p>
<p><a href="https://newlang.net/syntax_dsl.html">Например:</a>.</p>
<pre><code>    \if(...)     ::= \\ [ \$* ]--&gt; \\;
    \while(...)  ::= \\ [\$*] &lt;-&gt; \\;
    \return $arg ::=  \\ -- \$arg -- \\;
    \true ::= 1;
</code></pre>
<p>Тогда цикл до 5:</p>
<pre><code>count:=1;
[ 1 ] &lt;-&gt; {
    [count&gt;5] --&gt; {
        -- 42 --;
    };
    count+=1;
};
</code></pre>
<p>будет выглядеть более привычно</p>
<pre><code>count:=1;
while( true ) {
    if(count&gt;5) {
        return 42;
    };
    count+=1;
};
</code></pre>
<p>С полным списком макросов можно ознакомится <a href="https://newlang.net/syntax_dsl.html">тут</a> или посмотреть исходный <a href="https://github.com/rsashka/newlang/blob/master/examples/dsl.nlp">код программного модуля</a>.</p>
<h3 id="_9">Специальные идентификаторы</h3>
<ul>
<li><strong>$0</strong> — текущий объект для класса или None в остальных случаях.</li>
<li><strong>$*</strong> — Все аргументы текущей функции или модуля</li>
<li>
<p><strong>@*</strong> — Все аргументы запущенной программы</p>
</li>
<li>
<p><strong>$$</strong> — родительский объект (в том числе и при переопределении функций).</p>
</li>
<li><strong>@@</strong> — Системный контекст</li>
<li><strong>@$</strong> — Текущий модуль</li>
</ul>
<p>Проверить, является ли текущий модуль основным, можно протестировав его нулевой аргумент. У основного модуля программы, нулевой аргумент всегда будет содержать имя исполняемого файла, а остальные аргументы соответствовать параметрам командной строки (если они есть). Если файл загружен как модуль,
то нулевой аргумент у модуля будет пустым.</p>
<pre><code># Аналог проверки в Python
# if __name__ == &quot;__main__&quot;: 

[@$.$0] --&gt; { # или \ifmain при использовании макросов из модуля @dsl
    ...
};
</code></pre>
<h3 id="_10">Зарезервированные имена компилятора</h3>
<p>При работе парсера <em>NewLang</em> автоматически генерируются несколько зарезервированных имен, которые можно использовать как обычные константы.
Большинство из них соответствуют макросам препроцессора у С/С++:</p>
<ul>
<li>__FILE__ - расширяется до полного пути к текущему файлу</li>
<li>__LINE__ - содержит номер текущей строки</li>
<li>__TIMESTAMP__ - дату и время последней модификации текущего файла</li>
<li>
<p>__MD5__ - md5 хеш текущего файла</p>
</li>
<li>
<p>__DATE__ - дата и время начала запуска компилятора (имеет одно и тоже значение для всех обрабатываемых файлов)</p>
</li>
<li>__COUNTER__ - целочисленный счетчик, который увеличивает свое значение при каждом обращении</li>
<li>
<p>__NLC_VER__ - версия NewLang</p>
</li>
<li>
<p>__SOURCE_GIT__ - идентификатор исходных файлов NewLang git репозитория, использованных при сборке</p>
</li>
<li>__DATE_BUILD__ - дата сборки исходников NewLang</li>
<li>__SOURCE_BUILD__ - дата сборки и git идентификатор исходных файлов NewLang одной строкой</li>
</ul>
<h3 id="_11">Системные свойства</h3>
<p>Несмотря на то, что не все объекты <em>NewLang</em> являются классами с точки зрения <a href="https://newlang.net/type_oop.html">реализованной концепции ООП</a>, тем не менее, каждый объект имеет системные свойства, которые можно считать во время выполнения как обычные свойства объекта:</p>
<h4 id="_12">У всех переменных (объектов) есть системные свойства</h4>
<ul>
<li>__name__ - краткое имя переменной (объекта)</li>
<li>__full_name__ - полное имя переменной, включая имя модуля и пространство имен</li>
<li>__type__ - текущий тип переменной. Может изменится при некоторых операциях</li>
<li>__type_fixed__ - тип переменной (объекта) который не может измениться (ограничитель)</li>
<li>__module__ - имя модуля в котором определена переменная (объект)</li>
<li>__class__ - имя класса переменной или пусто, если объект не является классом</li>
<li>__base__ - словарь со списком базовых классов или пусто, если объект не является классом</li>
<li>
<p>__size__ - количество элементов у объекта, если применимо или :None </p>
</li>
<li>
<p>__doc__ - документация по текущему объекту (если есть, иначе пустая строка)</p>
</li>
<li>__str__ - строковое представление объекта для дампа</li>
<li>__source__ - исходный текст модуля или функции</li>
</ul>
<h4 id="_13">Системные свойства у модулей</h4>
<ul>
<li>__file__ - полный путь к файлу модуля (соответствует макросу __FILE__)</li>
<li>__timestamp__ - дата и время последней модификации файла модуля (соответствует макросу __TIMESTAMP__)</li>
<li>__md5__ - хеш исходных данных модуля (соответствует макросу __MD5__)</li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2016-2023 Ryabikov Aleksandr
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/rsashka" target="_blank" rel="noopener" title="Ryabikov Aleksandr on Github" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["header.autohide", "navigation.instant", "navigation.tracking", "navigation.indexes", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fc8c2696.min.js"></script>
      
    
  </body>
</html>